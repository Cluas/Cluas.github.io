<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="Cluas"><link rel=prev href=https://cluas.me/2020/217/><link rel=next href=https://cluas.me/2020/balanced-binary-tree/><link rel=canonical href=https://cluas.me/2020/773/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>773.图像渲染 | Cluas's blog</title><meta name=title content="773.图像渲染 | Cluas's blog"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/cluas.me"},"articleSection":"posts","name":"773.图像渲染","headline":"773.图像渲染","description":"原题 有一幅以二维整数数组表示的图画，每一个整数表示该图画的像素值大小，数值在 0 到 65535 之间。 给你一个坐标 (sr, sc) 表示图像渲染开始的像素值 （行 ，列） 和","inLanguage":"zh-cn","author":"Cluas","creator":"Cluas","publisher":"Cluas","accountablePerson":"Cluas","copyrightHolder":"Cluas","copyrightYear":"2020","datePublished":"2020-08-16 20:56:19 \u002b0800 \u002b0800","dateModified":"2020-08-16 20:56:19 \u002b0800 \u002b0800","url":"https:\/\/cluas.me\/2020\/773\/","wordCount":"799","keywords":["dfs","bfs","easy","Cluas\u0027s blog"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>➜</span>
<a href=https://cluas.me><span class=logo_text>cd ~</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://cluas.me>Cluas's blog</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/about/><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=https://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">773.图像渲染</h1><div class=post-meta>Written by <a itemprop=name href=https://cluas.me rel=author>Cluas</a> with ♥
<span class=post-time>on <time datetime=2020-08-16 itemprop=datePublished>August 16, 2020</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=https://cluas.me/categories/leetcode/>leetcode,</a></span>
<span class=post-word-count>799 words</span></div></header><div class=post-content><h3 id=原题>原题</h3><p>有一幅以二维整数数组表示的图画，每一个整数表示该图画的像素值大小，数值在 0 到 65535 之间。</p><p>给你一个坐标 <strong>(sr, sc)</strong> 表示图像渲染开始的像素值 <strong>（行 ，列）</strong> 和一个新的颜色值 <strong>newColor</strong>，让你重新上色这幅图像。</p><p>为了完成上色工作，从初始坐标开始，记录初始坐标的上下左右四个方向上像素值与初始坐标相同的相连像素点，接着再记录这四个方向上符合条件的像素点与他们对应四个方向上像素值与初始坐标相同的相连像素点，……，重复该过程。将所有有记录的像素点的颜色值改为新的颜色值。</p><p>最后返回经过上色渲染后的图像。</p><p>示例 1:</p><pre><code>输入: 
image = [[1,1,1],[1,1,0],[1,0,1]]
sr = 1, sc = 1, newColor = 2
输出: [[2,2,2],[2,2,0],[2,0,1]]
解析: 
在图像的正中间，(坐标(sr,sc)=(1,1)),
在路径上所有符合条件的像素点的颜色都被更改成2。
注意，右下角的像素没有更改为2，
因为它不是在上下左右四个方向上与初始点相连的像素点。
</code></pre><p>注意:</p><ul><li><strong>image</strong> 和 <strong>image[0]</strong> 的长度在范围 <strong>[1, 50]</strong> 内。</li><li>给出的初始点将满足 <strong>0 &lt;= sr &lt; image.length</strong> 和 <strong>0 &lt;= sc &lt; image[0].length</strong>。</li><li><strong>image[i][j]</strong> 和 <strong>newColor</strong> 表示的颜色值在范围 **[0, 65535]**内。</li></ul><h3 id=解题思路>解题思路</h3><p>看到题目第一反应就是对指定点的四个方向做递归搜索，搜索遇到边界后返回结果。
而搜索既可以采用bfs，又可以采用dfs。</p><h4 id=dfs>dfs</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>floodFill</span>(<span style=color:#a6e22e>image</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>sr</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>sc</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>newColor</span> <span style=color:#66d9ef>int</span>) [][]<span style=color:#66d9ef>int</span> {
    <span style=color:#66d9ef>var</span> (
        <span style=color:#a6e22e>dx</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>}
        <span style=color:#a6e22e>dy</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>}
    ) 
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dfs</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>image</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>newColor</span> <span style=color:#66d9ef>int</span>) 
    <span style=color:#a6e22e>dfs</span> = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>image</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>newColor</span> <span style=color:#66d9ef>int</span>) {
        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>x</span>][<span style=color:#a6e22e>y</span>] <span style=color:#f92672>==</span> <span style=color:#a6e22e>color</span> {
            <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>x</span>][<span style=color:#a6e22e>y</span>] = <span style=color:#a6e22e>newColor</span>
            <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>4</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
                <span style=color:#a6e22e>mx</span>, <span style=color:#a6e22e>my</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dx</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>dy</span>[<span style=color:#a6e22e>i</span>]
                <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>mx</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mx</span> &lt; len(<span style=color:#a6e22e>image</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>my</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>my</span> &lt; len(<span style=color:#a6e22e>image</span>[<span style=color:#ae81ff>0</span>]) {
                    <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>image</span>, <span style=color:#a6e22e>mx</span>, <span style=color:#a6e22e>my</span>, <span style=color:#a6e22e>color</span>, <span style=color:#a6e22e>newColor</span>)
                }
            }
        }
    }  
    <span style=color:#a6e22e>currColor</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>sr</span>][<span style=color:#a6e22e>sc</span>]
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>currColor</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>newColor</span> {
        <span style=color:#a6e22e>dfs</span>(<span style=color:#a6e22e>image</span>, <span style=color:#a6e22e>sr</span>, <span style=color:#a6e22e>sc</span>, <span style=color:#a6e22e>currColor</span>, <span style=color:#a6e22e>newColor</span>)
    }
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>image</span>
}
</code></pre></div><h4 id=bfs>bfs</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>floodFill</span>(<span style=color:#a6e22e>image</span> [][]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>sr</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>sc</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>newColor</span> <span style=color:#66d9ef>int</span>) [][]<span style=color:#66d9ef>int</span> {
     <span style=color:#66d9ef>var</span> (
        <span style=color:#a6e22e>dx</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>}
        <span style=color:#a6e22e>dy</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>}
    ) 
    <span style=color:#a6e22e>currColor</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>sr</span>][<span style=color:#a6e22e>sc</span>]
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>currColor</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>newColor</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>image</span>
    }
    <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> len(<span style=color:#a6e22e>image</span>), len(<span style=color:#a6e22e>image</span>[<span style=color:#ae81ff>0</span>])
    <span style=color:#a6e22e>queue</span> <span style=color:#f92672>:=</span> [][]<span style=color:#66d9ef>int</span>{}
    <span style=color:#a6e22e>queue</span> = append(<span style=color:#a6e22e>queue</span>, []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>sr</span>, <span style=color:#a6e22e>sc</span>})
    <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>sr</span>][<span style=color:#a6e22e>sc</span>] = <span style=color:#a6e22e>newColor</span>
    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; len(<span style=color:#a6e22e>queue</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
        <span style=color:#a6e22e>cell</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>queue</span>[<span style=color:#a6e22e>i</span>]
        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> &lt; <span style=color:#ae81ff>4</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
            <span style=color:#a6e22e>mx</span>, <span style=color:#a6e22e>my</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cell</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>dx</span>[<span style=color:#a6e22e>j</span>], <span style=color:#a6e22e>cell</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>dy</span>[<span style=color:#a6e22e>j</span>]
            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>mx</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mx</span> &lt; <span style=color:#a6e22e>n</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>my</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>my</span> &lt; <span style=color:#a6e22e>m</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>mx</span>][<span style=color:#a6e22e>my</span>] <span style=color:#f92672>==</span> <span style=color:#a6e22e>currColor</span> {
                <span style=color:#a6e22e>queue</span> = append(<span style=color:#a6e22e>queue</span>, []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>mx</span>, <span style=color:#a6e22e>my</span>})
                <span style=color:#a6e22e>image</span>[<span style=color:#a6e22e>mx</span>][<span style=color:#a6e22e>my</span>] = <span style=color:#a6e22e>newColor</span>
            }
        }
    }
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>image</span>
}
</code></pre></div><h3 id=总结>总结</h3><p>遇到这种带方向的，好多都可以套模版。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// 先定义四个方向的变化量，再依次遍历方向
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> (
    <span style=color:#a6e22e>dx</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>}
    <span style=color:#a6e22e>dy</span> = []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>}
) 
<span style=color:#75715e>// 到达边界，do someting...
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>到达边界</span> {
    <span style=color:#a6e22e>do</span> <span style=color:#a6e22e>something</span><span style=color:#f92672>...</span>
}
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Cluas</span></p><p class=copyright-item><span>Link:</span>
<a href=https://cluas.me/2020/773/>https://cluas.me/2020/773/</a></p><p class="copyright-item lincese">本文采用<a rel=license href=https://creativecommons.org/licenses/by-nc/4.0/deed.zh target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://cluas.me/tags/dfs/>#dfs</a></span>
<span class=tag><a href=https://cluas.me/tags/bfs/>#bfs</a></span>
<span class=tag><a href=https://cluas.me/tags/easy/>#easy</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://cluas.me>home</a></span></section></div><div class=post-nav><a href=https://cluas.me/2020/217/ class=prev rel=prev title="每日一题 217 存在重复元素"><i class="iconfont icon-left"></i>&nbsp;每日一题 217 存在重复元素</a>
<a href=https://cluas.me/2020/balanced-binary-tree/ class=next rel=next title="Balanced Binary Tree">Balanced Binary Tree&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script><script>const gitalk=new Gitalk({clientID:'234ecd525feb46f06ed0',clientSecret:'bff3b6e3595bf92c0ad3dd5d73af607552b6b46d',repo:'Cluas.github.io',owner:'Cluas',admin:['Cluas'],id:location.pathname,distractionFreeMode:false});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return;}
gitalk.render('gitalk-container');})();</script></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2017 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://cluas.me>Cluas</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Cluas/mml target=_blank rel="external nofollow">mml</a></span></div></footer><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage();</script></div></body></html>